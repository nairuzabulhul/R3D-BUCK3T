# Active Directory Pentesting Methodology

> The Active Directory methodology is a collection of attacks and techniques to abuse AD misconfiguration during pentation testing or red teaming engagements. Each section lists the types of attacks that can be performed, used tools, steps to achieve them, and resources for additional search. The methodology assumes the attacker has local administrative privileges on the compromised machine to run the needed tools and perform most attacks here. However, some will require additional privileges like domain or enterprise admins, which you can find in the attack's requirement section.
> 
&nbsp; 
## Table of Contents

- **[Domain Controller Overview](https://www.notion.so/Windows-Active-Directory-Pentesting-e8b133fb1342403aabde337b82f66fbd)**
- Initial Access Attacks
- **[Domain Enumeration (Users, Groups, Computers, GPOs, ACLs)](https://www.notion.so/Windows-Active-Directory-Pentesting-e8b133fb1342403aabde337b82f66fbd)**
- **Enumerating AD Trusts**
- **[Abusing Kerberos](https://www.notion.so/Windows-Active-Directory-Pentesting-e8b133fb1342403aabde337b82f66fbd)**
    - **AS-REPRoasting**
    - **Kerberoasting**
- **[Abusing Kerberos Authentication & Delegation](https://www.notion.so/Windows-Active-Directory-Pentesting-e8b133fb1342403aabde337b82f66fbd)**
    - **Unconstrained Delegation**
    - **Constrained Delegation**
    - **Resource-based Constrained Delegation**
- **Abusing ACLs Misconfigurations**
- **Abuse Active Directory Domain Trusts**

&nbsp; 
&nbsp; 
## **Domain Controller Overview**

> Domain Controller hosts multiple subsets of components that work together to give that experience of a Windows network hub. In this section, we will learn about the
> 

üèóÔ∏è **Domain Controller Components**

- Active Directory
- LDAP Server
- DNS Server
- Time Server
- File Server
- Multi Master

- **[Domain Controller Components ( In Details)](https://www.notion.so/Domain-Controller-Components-In-Details-45ab80aeb6f247938be0867d74aa09fe)**

üìö **Resources** 

- **[Red Teaming: ADventures in Active Directory](https://www.youtube.com/watch?v=dO2cZu7090A)**
- Hack The Box Academy
- Hack The Box Academy

&nbsp; 
&nbsp; 
## Initial Access Attacks
> 
> 

**üî• Initial Access to Active Directory Environment**
   - Finding Domains and Domain Controllers
   - Credential Harvesting
   - Initial Enumeration after obtaining access
   - [Adding the attacking machine to the domain](https://www.notion.so/r3dbuck3t/Adding-the-attacking-machine-to-the-domain-5111eb90a3574ca7bef81ecb5a9a5c1b)

üõ†Ô∏è **Tools**:

    - Wireshark
    - NTLM Theft
    - Metasploit
    - Responder
    - GPResult
    
üìö **Resources** 

- **[Red Teaming: ADventures in Active Directory](https://www.youtube.com/watch?v=dO2cZu7090A)**
- Introduction to Penetration Testing Tradecraft - Black Hills Information Security (BHIS)
- [Ignite Technologies - Active Directory Pentesting Training](https://ignitetechnologies.in/active-directory.html)
- Hack The Box Academy - Active Directory Enumeration & Attacks

&nbsp; 
&nbsp;
## Domain Enumeration (Users, Groups, Computers, GPOs, ACLs)

> Enumeration is¬†**the process of extracting information from the Active Directory** ¬†(e.g. users and groups) to get the lay of the land and understand the design of the internal network.

üõ†Ô∏è **Tools**:

    - PowerView
    - SharpView
    - GPResults 
    - BloodHound
    - Active Directory PowerShell Module

üíª **Enumeration Commands**

- [AD Enumeration (Users, Groups, Computers, GPOs) with PowerView & SharpView](https://www.notion.so/AD-Enumeration-Users-Groups-Computers-GPOs-with-PowerView-SharpView-896c022bbc9b4f62b5d6e83476851612)

- [Domain Enumeration (Users, Groups, Computers, GPOs) with PowerShell AD Module](https://www.notion.so/Domain-Enumeration-Users-Groups-Computers-GPOs-with-PowerShell-AD-Module-3640b94ad929460e9b6c959a1978df4f)

- [Domain Enumeration with PowerShell Active Directory Module](https://www.notion.so/Domain-Enumeration-with-PowerShell-Active-Directory-Module-a6d901bd09ce46f9a4be4bcb85b9d6df)

- [**Trusts Enumeration with PowerView and AD-Module**](https://www.notion.so/Trusts-Enumeration-with-PowerView-and-AD-Module-f5c6e32948ff4998928c7c510b9ebdd5)

- [****Access Control Lists (ACLs) Enumeration & Abuse****](https://www.notion.so/Access-Control-Lists-ACLs-Enumeration-Abuse-e1a29a0b473c46879555307fded271b1)

- [BloodHound](https://www.notion.so/BloodHound-202fbf1af8594dcb9264a24633f60c24)


üìö **Resources** 

- **[Domain Enumeration with PowerShell Active Directory Module](https://medium.com/r3d-buck3t/domain-enumeration-with-active-directory-powershell-module-7ce4fcfe91d3) (R3d-Buck3T Blog)**
- **[Enumerating Domain Trusts in Active Directory](https://medium.com/r3d-buck3t/enumerating-domain-trusts-in-active-directory-series-c85205fc862f)  (R3d-Buck3T Blog)**

&nbsp; 
&nbsp; 
